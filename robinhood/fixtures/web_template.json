[
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2022-02-19 17:29:41.486270",
  "module": "Robinhood",
  "name": "all-cities",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "{% set cities = frappe.db.sql(\"\"\"SELECT c.name FROM `tabCity` as c order by c.name\"\"\", as_dict=True)%}\n<div class='row city' style=\"margin-bottom: 4rem;\">\n    <div class=\"col-md-3\">\n    \n<label for=\"city\">Choose a city:</label>\n\n<select name=\"city\" id=\"city\" class=\"form-control\">\n    <option></option>\n    {% for city in cities %}\n   <option value=\"{{city.name}}\">{{city.name}}</option>\n   {% endfor %}\n</select>\n    \n</div>\n\n</div>",
  "type": "Section"
 },
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2022-05-14 09:42:02.068968",
  "module": "Robinhood",
  "name": "Heat-Map",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "<script>\n  console.log(\"wah heat map;...\", Chart);\n</script>\n",
  "type": "Section"
 },
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2022-02-14 11:59:05.681097",
  "module": "Robinhood",
  "name": "checkins-chart",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "<h2>CheckIn trend</h2>\n\n<div id=\"chart\"></div>\n<script type=\"text/javascript\">\n    var city = ''\n    if (window.location.pathname.includes('city')) {\n        city = window.location.pathname.split('/')[2]\n    }\n\n    frappe.call({\n        method: \"robinhood.robinhood.doctype.checkin.checkin.checkins\",\n        freeze: true,\n        type: 'get',\n        args: {\n            \"city\": city\n        },\n        callback: function(r) {\n            if (r) {\n                const data = {\n                    labels: r.message['labels'],\n                    datasets: [{\n                        name: \"CheckIns\",\n                        type: \"bar\",\n                        values: r.message['values']\n                    }, ]\n                }\n\n                const chart = new Chart.Chart(\"#chart\", { // or a DOM element,\n                    // new Chart() in case of ES6 module with above usage\n                    title: \"CheckIns in the last 60 days\",\n                    data: data,\n                    type: 'bar', // or 'bar', 'line', 'scatter', 'pie', 'percentage'\n                    height: 250,\n                    colors: ['#0B622E', '#0B622E']\n                })\n            }\n        }\n    });\n    </script>",
  "type": "Section"
 },
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2021-12-06 12:28:13.883000",
  "module": "Robinhood",
  "name": "Home",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "<div>\n    The Robin Hood Army is a volunteer-based Zero funds organization that works to get surplus food from restaurants to the less fortunate sections of society in cities across India and 14 other countries. \n    <a href=\"https://en.wikipedia.org/wiki/Robin_Hood_Army\">Wikipedia</a>\n</div>",
  "type": "Section"
 },
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2022-02-03 17:31:36.528225",
  "module": "Robinhood",
  "name": "top-chapters",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "{% set args = frappe.form_dict %}\n{% if args %}\n    {% set chapters = frappe.db.sql(\"\"\"select count(*) as checkin_count, r.chapter from `tabCheckin` as c INNER JOIN `tabRobin Chapter Mapping` as r on c.chapter = r.name  inner join `tabChapter` as cp on r.chapter = cp.name  where cp.city = %(city)s group by r.chapter\"\"\", args, as_dict=True    ) %}\n{% else %}\n    {%   set chapters = frappe.db.sql(\"\"\" select count(*) as checkin_count, r.chapter from `tabCheckin` as c INNER JOIN `tabRobin Chapter Mapping` as r on c.chapter = r.name group by r.chapter\"\"\", as_dict=True) %}\n{% endif %}\n<div>\n    <h2>Top chapters</h2>\n    <div class=\"dheight\">\n        The Robin Hood Army is a volunteer-based Zero funds organization that works to get surplus food from restaurants\n    </div>\n</div>\n<div class=\"row dheight\">\n    {% for chapter in chapters %}\n    <div class=\"col-md-6\">\n        <div class=\"row dheight\">\n            <div class=\"col-md-3\">\n                {{ loop.index }}. {{ chapter.chapter}}\n            </div>\n            <div class=\"col-md-9\">\n                <div style='background-color:green;width:70%;height: 5px;border-radius: 3px;'></div>\n                <div>{{ frappe.format(chapter.checkin_count) }}</div>\n            </div>\n        </div>\n    </div>\n   \n    {% endfor %}\n    \n</div>",
  "type": "Section"
 },
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2022-06-14 09:27:14.714025",
  "module": "Robinhood",
  "name": "top-cities",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "{% set cities = frappe.db.sql(\"\"\" select count(c.name) as drives, c.city from `tabCheckin` as c group by c.city order by drives desc limit 10\"\"\", as_dict=True) %}\n<div>\n <h2>Top Active Cities</h2>\n    <div class=\"dheight\">\n        No. of checkIns across the cities in the last 60 days.\n    </div>\n</div>\n<div class=\"row dheight\">\n    {% for city in cities %}\n    <div class=\"col-md-6\">\n        <div class=\"row dheight\">\n            <div class=\"col-md-3\">\n                <a href = '/city/{{ city.city }}'>{{ loop.index }}. {{ city.city }}</a>\n            </div>\n            <div class=\"col-md-9\">\n                <div style='background-color:green;width:{{(city.drives/1000) * 100}}%;height: 5px;border-radius: 3px;max-width: 100%;'></div>\n                <div>{{ frappe.format(city.drives) }}</div>\n            </div>\n        </div>\n    </div>\n    {% endfor %}\n</div>\n\n",
  "type": "Section"
 },
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2022-06-26 20:25:59.125085",
  "module": "Robinhood",
  "name": "top-robins",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "\n{% set args = frappe.form_dict %}\n{% if args %}\n    {% set checkins = frappe.db.sql(\"\"\"SELECT c.name, up.username, ifnull(up.user_image, '/assets/robinhood/images/robinhood_alt.png') as profile_thumbnail, c.creation, up.first_name as owner, c.city as chapter, count(*) as checkin_count from `tabCheckin` c  inner join `tabUser` as up on c.owner = up.name WHERE  c.city = %(city)s and date(c.creation) > DATE(DATE_SUB(NOW(), INTERVAL 60 DAY)) group by c.owner order by checkin_count desc limit 10\"\"\", args, as_dict=True    ) %}\n{% else %}\n    {%   set checkins = frappe.db.sql(\"\"\"SELECT c.name, up.username, ifnull(up.user_image, '/assets/robinhood/images/robinhood_alt.png') as profile_thumbnail, c.creation, up.first_name as owner, c.city as chapter, count(*) as checkin_count from `tabCheckin` c inner join `tabUser` as up on c.owner = up.name where date(c.creation) > DATE(DATE_SUB(NOW(), INTERVAL 60 DAY)) group by c.owner, c.city order by checkin_count desc limit 10\"\"\", as_dict=True)%}\n{% endif %}\n\n\n<h2>Top Active Robins</h2>\n    <div>Robins with the highest checked in drives in the last 60 days.</div>\n\n<table>\n        <tr>\n            <th class='table-header'></th>\n            <th class='table-header'>Name</th>\n            <th class='table-header'>Chapter</th>\n            <th class='table-header'>Drives</th>\n        </tr>\n        {% for checkin in checkins %}\n        \n            <tr>\n                <td class='text-center'><span><img src={{checkin.profile_thumbnail}} width='90px' height='90px' style=\"border-radius: 50%;object-fit:cover;\"> </span></td>\n                <td class='border-bottom'> <a href=\"/r/{{ checkin.username }}\"> {{ checkin.owner.title() }} </a></td>\n                <td class='border-bottom'> <a href = '/city/{{ checkin.chapter }}'>{{ checkin.chapter }}</a> </td>\n                <td class='border-bottom'>{{ frappe.format(checkin.checkin_count) }}</td>\n            </tr>\n        {% endfor %}\n    </table>\n    ",
  "type": "Section"
 },
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2022-05-16 15:51:49.503092",
  "module": "Robinhood",
  "name": "city",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "{% set args = frappe.form_dict %}\n{% set city = frappe.db.sql(\"\"\" SELECT name, state from `tabCity` where name = %(city)s \"\"\", args, as_dict=True) %}\n{% set total_checkins = frappe.db.sql(\"\"\" select count(c.name) as checkins from `tabCheckin` as c where c.city = %(city)s \"\"\", args, as_dict=True) %} \n{% set total_drives = frappe.db.sql(\"\"\" select  count(*) as checkin_count from `tabCheckin` where city = %(city)s \"\"\", args, as_dict=True) %}\n{% set total_chapters = frappe.db.sql(\"\"\" select count(name) as chapters from `tabChapter` where city = %(city)s \"\"\", args, as_dict=True) %}\n{% set total_robins = frappe.db.sql(\"\"\" SELECT count(distinct r.user) as robins from `tabRobin Chapter Mapping` as r inner join `tabChapter` as c on r.chapter = c.name where c.city = %(city)s group by c.name \"\"\", args, as_dict=True)%}\n{% set week_avg = frappe.db.sql(\"\"\" SELECT ROUND(AVG(checkins),0) as average FROM      (SELECT COUNT(name) AS checkins FROM `tabCheckin`where city = %(city)s    GROUP BY week(creation)) AS avg_checkins  \"\"\", args, as_dict=True) %}\n<div>\n    {% if city %}\n    <h2>\n        \n{{ city[0].name }}</h2>\n    {{ city[0].state }}\n{% else %}\n    Invalid City Name\n{% endif %}\n</div>\n<hr>\n\n<div class=\"row table-header\">\n    <div class=\"col-md-3\">\n        All time checkIns\n        <p style=\"margin-bottom: 0px;\">{{total_checkins[0].checkins}}</p>\n    </div>\n    <div class=\"col-md-3\">\n        Recent checkIns\n        <p style=\"margin-bottom: 0px;\"> {% if total_drives %}\n            {{ frappe.format(total_drives[0].checkin_count) }}\n        {% else %}\n            0\n        {% endif %}</p>\n    </div>\n    <div class=\"col-md-3\">\n        Robins\n        <p style=\"margin-bottom: 0px;\">\n            {% if total_robins %}\n            {{frappe.format(total_robins[0].robins) }}\n        {% else %}\n            0\n        {% endif %}\n        </p>\n    </div>\n    <div class=\"col-md-3\">\n        Average checkIns\n        <p style=\"margin-bottom: 0px;\">\n            {{ frappe.format(week_avg[0].average) }} / week\n        </p>\n    </div>\n</div>\n\n\n<hr>\n<script>document.title = \"{{ city[0].name }} - \" + document.title;</script>",
  "type": "Section"
 },
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2022-04-05 18:27:30.056356",
  "module": "Robinhood",
  "name": "Gallery",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "{% set args = frappe.form_dict %}\n{% if args %}\n    {% set images = frappe.db.sql(\"\"\"SELECT u.first_name, c.selfie_thumbnail, c.creation, date(c.creation) as posting_date from `tabCheckin` c JOIN `tabUser` u on c.owner=u.name  WHERE  c.city = %(city)s and c.selfie_thumbnail is not null order by creation desc limit 10;\"\"\", args, as_dict=True) %}\n{% else %}\n    {%   set images = frappe.db.sql(\"\"\"SELECT u.first_name, c.selfie_thumbnail, c.creation, date(c.creation) as posting_date, c.city from `tabCheckin` c JOIN `tabUser` u on c.owner=u.name  WHERE  c.selfie_thumbnail is not null order by creation desc limit 10;\"\"\", as_dict=True)%}\n{% endif %}\n\n<script>\n    \n    \n</script>\n\n\n<h2>Recent checkIns</h2>\n<div style=\"display: flex;flex-direction:row;\">\n<div class=\"row\">\n{% for image in images %}\n{% set image_link =  image.selfie_thumbnail.replace(\"-small\",\"\") %}\n\n   <div class=\"col-sm-3 col-md-2\">\n        <a href={{ image_link }} class=\"thumbnail\"><img src={{ image.selfie_thumbnail }} style=\"width:100px;height:100px;object-fit: cover; margin-right:5px\"/>\n        <p>{{image.first_name | title }}</p>\n      <span>{{image.city | title }}</span>\n      <p style=\"color: grey; font-size:12px\">{{image.posting_date}}</p></a>\n      </div>\n{% endfor %}\n\n\n</div>\n</div>\n\n",
  "type": "Section"
 },
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2022-06-14 10:41:07.949162",
  "module": "Robinhood",
  "name": "profile",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "{% if args.user == 'user' %}\n\n{% set args = frappe.db.sql(\"\"\"SELECT username as user, name from `tabUser` where name = %(user)s\"\"\", {\"user\": frappe.session.user}, as_dict=True) %}\n{% else %}\n\n{% set args = frappe.db.sql(\"\"\"SELECT username as user, name  from `tabUser` where username = %(user)s\"\"\", {\"user\": args.user}, as_dict=True) %}\n\n{% endif %}\n\n{% set args = args[0] %}\n\n\n{% set checkin = frappe.db.sql(\"\"\"SELECT u.full_name, COALESCE(u.bio, '') as bio, u.creation as joining_date, ifnull(u.user_image, '/assets/robinhood/images/robinhood_alt.png') as profile_thumbnail, count(c.name) as checkins from `tabCheckin` c JOIN `tabUser` u on c.owner=u.name  WHERE (c.students_taught > 0 or c.meals_served > 0)  and u.username = %(user)s \"\"\", args, as_dict=True) %}\n{% set user = frappe.db.sql(\"\"\"SELECT user.email as user_email, c.name as city, c.state from `tabUser profile update` as u inner join `tabCity` as c on u.city = c.name inner join `tabUser` as user on user.name = u.owner where user.username = %(user)s order by u.creation desc limit 1\"\"\", args, as_dict=True) %}\n\n\n{% set food_drives = frappe.db.sql(\"\"\"SELECT count(c.name) as food_drives from `tabCheckin` c inner join `tabUser` as u on c.owner = u.name where c.meals_served > 0 and u.username = %(user)s  \"\"\", args, as_dict=True)  %}\n{% set academy_drives = frappe.db.sql(\"\"\"SELECT count(c.name) as academy_drives from `tabCheckin`  c inner join `tabUser` as u on c.owner = u.name where c.students_taught > 0 and u.username = %(user)s  \"\"\", args, as_dict=True)  %}\n\n{% set badges = frappe.db.sql(\"\"\" SELECT r.name, r.type_of_certificate, r.date_of_issue from `tabRobin Certificate Log` r inner join `tabUser` as u on r.robin = u.name where u.username = %(user)s and r.date_of_issue is not null group by r.type_of_certificate\"\"\", args, as_dict=True) %}\n\n\n<script> \n(function (){   \n    if(!frappe.session.user || frappe.session.user === 'Guest'){\n        return\n    }\n    frappe.call({\n        type: 'GET',\n        method:\n          \"robinhood.robinhood.doctype.robin_certificate_log.robin_certificate_log.download_certificate\",\n        callback: function (r) {\n            for(key in r.message){\n                if(r.message[key]===null){\n                    continue    \n                }\n                var filecontent  = r.message[key]\n                var bytes = new Uint8Array(filecontent); // pass your byte response to this constructor\n                var blob=new Blob([bytes], {type: \"application/pdf\"});// change resultByte to bytes\n                \n                var link = document.getElementById(\"download\"+key);\n                link.href=window.URL.createObjectURL(blob);\n                link.download=Date.now() + '.pdf';\n            }\n}})})()\n\n// document.title = '{{ checkin[0].full_name }} - Robin Hood Army' \n\n\nfunction share(){\n    const shareData = {\n    title:  '{{ checkin[0].full_name }} - Robin Hood Army' ,\n    text:  '{{ checkin[0].full_name }} - Robin Hood Army' ,\n    url: document.URL\n  }\n    navigator.share(shareData)\n}\n\n\n\nfunction shareBadge(fileArray, _type){\n    let badgeName = ''\n    if(_type=='10'){\n        badgeName = 'Ninja'\n    }\n    else {\n        badgeName = 'Centurion'\n    }\n    let msg=`I am a ${badgeName} now at Robin Hood Army. Check out my profile ${document.location.href}\n\n#RobinHoodArmy #RHA #ZeroHunger.\n\nLearn more about RHA here - https://robinhoodarmy.com\n`\n    const shareData = {\n    title:  'Robin Hood Army',\n    text:  msg ,\n    // url: document.URL,\n    files: fileArray\n  }\n   console.log(\"share data///\", shareData)\n    navigator.share(shareData);\n}\n\nasync function onBadgeShareClick(_type){\n    let imageURL =''\n    if(_type == '10'){\n        imageURL = 'https://checkin.robinhoodarmy.com/files/e88335537ece77b.png'\n    }\n    else {\n        imageURL = 'https://checkin.robinhoodarmy.com/files/44b1f660e401422.png'\n    }\n    let imageData = await fetch(imageURL)\n    let blob = await imageData.blob()\n    shareBadge([new File([blob], \"bade.png\",{ type: \"image/png\" })], _type)\n\n}\n\n</script>\n\n<div class=\"row\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"35.5\" height=\"11.5\" viewBox=\"0 0 35.5 11.5\" onclick=\"share();\" class=\"share\" style=\"position: absolute;    top: 7%;    right: 20px;    z-index: 1050; width: 18%;height: 18%;\">\n              <g id=\"Group_213\" data-name=\"Group 213\" transform=\"translate(-2095.75 -12054.25)\">\n                <rect id=\"Rectangle_79\" data-name=\"Rectangle 79\" width=\"35\" height=\"11\" rx=\"5.5\" transform=\"translate(2096 12054.5)\" fill=\"#fff\"></rect>\n                <path id=\"Rectangle_79_-_Outline\" data-name=\"Rectangle 79 - Outline\" d=\"M5.5-.25h24a5.75,5.75,0,0,1,0,11.5H5.5a5.75,5.75,0,0,1,0-11.5Zm24,11a5.25,5.25,0,0,0,0-10.5H5.5a5.25,5.25,0,0,0,0,10.5Z\" transform=\"translate(2096 12054.5)\" fill=\"#00622e\"></path>\n                <g id=\"Group_212\" data-name=\"Group 212\" transform=\"translate(-1.394 -241)\">\n                  <g id=\"Group_207\" data-name=\"Group 207\" transform=\"translate(2105.06 12298)\">\n                    <path id=\"Path_149\" data-name=\"Path 149\" d=\"M15.02,3.04a1.02,1.02,0,1,1,1.02-1.02A1.023,1.023,0,0,1,15.02,3.04Zm0-1.53a.51.51,0,1,0,.51.51A.511.511,0,0,0,15.02,1.51Z\" transform=\"translate(-14 -1)\" fill=\"#00622e\"></path>\n                  </g>\n                  <g id=\"Group_208\" data-name=\"Group 208\" transform=\"translate(2102 12299.785)\">\n                    <path id=\"Path_150\" data-name=\"Path 150\" d=\"M3.02,10.04A1.02,1.02,0,1,1,4.04,9.02,1.023,1.023,0,0,1,3.02,10.04Zm0-1.53a.51.51,0,1,0,.51.51A.511.511,0,0,0,3.02,8.51Z\" transform=\"translate(-2 -8)\" fill=\"#00622e\"></path>\n                  </g>\n                  <g id=\"Group_209\" data-name=\"Group 209\" transform=\"translate(2105.06 12301.57)\">\n                    <path id=\"Path_151\" data-name=\"Path 151\" d=\"M15.02,17.04a1.02,1.02,0,1,1,1.02-1.02A1.023,1.023,0,0,1,15.02,17.04Zm0-1.53a.51.51,0,1,0,.51.51A.511.511,0,0,0,15.02,15.51Z\" transform=\"translate(-14 -15)\" fill=\"#00622e\"></path>\n                  </g>\n                  <g id=\"Group_210\" data-name=\"Group 210\" transform=\"translate(2103.429 12300.933)\">\n                    <path id=\"Path_152\" data-name=\"Path 152\" d=\"M9.591,14.032a.23.23,0,0,1-.127-.025L7.73,12.987a.263.263,0,1,1,.255-.459l1.734,1.02a.282.282,0,0,1,.1.357A.268.268,0,0,1,9.591,14.032Z\" transform=\"translate(-7.603 -12.503)\" fill=\"#00622e\"></path>\n                  </g>\n                  <g id=\"Group_211\" data-name=\"Group 211\" transform=\"translate(2103.417 12299.148)\">\n                    <path id=\"Path_153\" data-name=\"Path 153\" d=\"M7.824,7.032A.3.3,0,0,1,7.595,6.9a.258.258,0,0,1,.1-.357l1.734-1.02a.282.282,0,0,1,.357.1.258.258,0,0,1-.1.357L7.952,7.007C7.9,7.007,7.875,7.032,7.824,7.032Z\" transform=\"translate(-7.559 -5.503)\" fill=\"#00622e\"></path>\n                  </g>\n                </g>\n                <path id=\"Path_154\" data-name=\"Path 154\" d=\"M2.915-3.273h.511A1.323,1.323,0,0,0,1.952-4.423,1.33,1.33,0,0,0,.46-3.2c0,.588.426.937,1.108,1.134l.537.153c.46.128.869.29.869.724,0,.477-.46.793-1.065.793-.52,0-.98-.23-1.023-.724H.341c.051.716.631,1.2,1.568,1.2,1.006,0,1.577-.554,1.577-1.261,0-.818-.776-1.082-1.227-1.2l-.443-.119C1.491-2.591.972-2.761.972-3.23c0-.418.384-.724.963-.724C2.463-3.955,2.864-3.7,2.915-3.273Zm1.875,1.3a.822.822,0,0,1,.861-.895.723.723,0,0,1,.759.818V0h.5V-2.08c0-.842-.447-1.236-1.116-1.236a.95.95,0,0,0-.963.554H4.79v-1.6h-.5V0h.5ZM8.8.077a1.028,1.028,0,0,0,.972-.52h.026V0h.5V-2.156a1.075,1.075,0,0,0-1.21-1.159,1.329,1.329,0,0,0-1.312.767l.477.17A.884.884,0,0,1,9.1-2.872a.608.608,0,0,1,.69.665v.017c0,.243-.247.222-.844.3s-1.27.213-1.27.963A1.011,1.011,0,0,0,8.8.077Zm.077-.452c-.4,0-.69-.179-.69-.528,0-.384.349-.5.741-.554a2.584,2.584,0,0,0,.869-.187v.46A.84.84,0,0,1,8.872-.375ZM11.216,0h.5V-2.071a.775.775,0,0,1,.827-.767.626.626,0,0,1,.29.06l.17-.426a.7.7,0,0,0-.418-.119.884.884,0,0,0-.852.545H11.7v-.494h-.486Zm3.571.068a1.273,1.273,0,0,0,1.3-.827l-.486-.136a.8.8,0,0,1-.818.511.991.991,0,0,1-1.021-1.082h2.376v-.213c0-1.219-.724-1.636-1.406-1.636a1.521,1.521,0,0,0-1.474,1.7A1.5,1.5,0,0,0,14.787.068ZM13.766-1.9a.977.977,0,0,1,.969-.963.887.887,0,0,1,.895.963Z\" transform=\"translate(2109 12062)\" fill=\"#00622e\"></path>\n              </g>\n            </svg>\n    <div class=\"col-md-2 profile_image\" style =\" text-align:center\">\n        <div class=\"img-container\">\n            <div class=\"frame\">\n                <img src=\"{{checkin[0].profile_thumbnail}}\" class=\"profile-img\" width=\"150\" height=\"150\" alt=\"\" />\n            </div>\n        </div>\n    </div>\n    <div class=\"col-md-10 profile_name\">\n        <div class=\"row\">\n            <div class=\"col-md-12\">\n                {% if args.name == frappe.session.user %}\n                 <a href=\"/profile-update\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M11.013 1.427a1.75 1.75 0 012.474 0l1.086 1.086a1.75 1.75 0 010 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 01-.927-.928l.929-3.25a1.75 1.75 0 01.445-.758l8.61-8.61zm1.414 1.06a.25.25 0 00-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 000-.354l-1.086-1.086zM11.189 6.25L9.75 4.81l-6.286 6.287a.25.25 0 00-.064.108l-.558 1.953 1.953-.558a.249.249 0 00.108-.064l6.286-6.286z\"></path></svg><span  class = 'RobinName-HA'  id=\"robin_name\"> {{ checkin[0].full_name }}</span></a>\n                {% else %}\n                <span  class = 'RobinName-HA'  id=\"robin_name\"> {{ checkin[0].full_name }}</span>\n                {% endif %}\n                <script>document.getElementById('robin_name').innerHTML = capitalize('{{ checkin[0].full_name }}')</script>\n            </div>\n            <div class=\"col-md-12\">\n                {% if user %}\n                <div>\n                 <span class=\"profile-city\"> {{ user[0].city }},  {{ user[0].state }}</span>\n                 </div>\n                {% endif %}\n            </div>\n        </div>\n            \n    </div>\n\n</div>\n {% if checkin[0].bio %}\n    <div class=\"row\">\n        <div class=\"col-md-2\"></div>\n        <div class=\"col-md-8\">\n            <span class=\"bio\"> {{ checkin[0].get('bio', '') }}</span>\n        </div>\n    </div>\n    \n{% endif %}\n<div class=\"row\">\n    <div class=\"col-md-2\"></div>\n    {% if badges %}\n    <div class=\"col-md-3\">\n        {% for badge in badges %}\n    \n        <div class=\"row\">\n            \n            <div class=\"col-md-3\" style =\" text-align:center\">\n                <div class=\"\">\n                    <div class=\"\">\n                        {% if badge.type_of_certificate == \"10\" %}\n                        <img id='10_badge' src=\"https://checkin.robinhoodarmy.com/files/e88335537ece77b.png\" class=\"badgeimg\" alt=\"\" />\n\n                        {% elif badge.type_of_certificate == \"100\" %}\n                        <img id='100_badge'  src=\"https://checkin.robinhoodarmy.com/files/44b1f660e401422.png\" class=\"badgeimg\" alt=\"\" />\n                        {% endif %}\n                    </div>\n                </div>\n            </div>\n            \n            \n            <div class=\"col-md-9\">\n                <div class=row>\n                    <div class=\"col-md-12\"> <span class=\"badgename\"> {% if badge.type_of_certificate == \"10\" %} Ninja {% elif badge.type_of_certificate == \"100\" %} Centurion {% endif %}</span></div>\n                    <div class=\"col-md-10 badgeinfo\" title=\"{{ badge.date_of_issue }}\" id=\"{{ badge.name }}\" style=\"color: #888;\">\n                        <script>\n                            document.getElementById(\"{{ badge.name }}\").innerHTML = \n                            moment(\"{{ badge.date_of_issue }}\").format(\"Do MMM YYYY\")\n                        </script>\n                    </div>\n                    <div class=\"col-md-12\"> \n                        {% if badge.type_of_certificate == \"10\" and user_email == frappe.session.user %} \n                        <a id='download10' style=\"color: #888; font-size: 12px;\" href='#' download>Download Certificate</a>\n                        <a  style=\"color: #888; font-size: 12px;margin-left: 12px;\" href='#' onclick='javascript:onBadgeShareClick(10)'>Share</a>\n                        {% elif badge.type_of_certificate == \"100\" and user_email == frappe.session.user %}\n                        <a id='download100' style=\"color: #888; font-size: 12px;\" href='#' download>Download Certificate</a>\n                        <a id='100_badge' style=\"color: #888; font-size: 12px;margin-left: 12px;\" href='#' onclick='javascript:onBadgeShareClick(100)'>Share</a>\n                        {% endif %}\n                    </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        {% endfor %}\n    </div>\n    {% endif %}\n\n    <div class=\"col-md-4\">\n        {% if checkin[0].checkins < 10 %}\n            <div class=\"row table-header\">\n                    \n                    <div class=\"col-md-2\" style =\" text-align:center\">\n                        <div class=\"\">\n                            <div class=\"\">\n                                <img src=\"https://checkin.robinhoodarmy.com/files/e88335537ece77b.png\" class=\"badgeimg\" alt=\"\" />\n                            </div>\n                        </div>\n                    </div>\n                    \n                    \n                    <div class=\"col-md-10\">\n                        <div class=row>\n                            <div class=\"col-md-12\"> <span class=\"badgename\" style=\"color: #eaeaea;\">Ninja</span></div>\n                            <div class=\"col-md-10\" style=\"color: #888;\">\n                                {{ 10 - checkin[0].checkins }} more drives to go\n                            </div>\n                        </div>\n                    </div>\n                </div>\n        \n        {% endif %}\n        \n        {% if checkin[0].checkins < 100 %}\n            <div class=\"row\">\n                    \n                    <div class=\"col-md-2\" style =\" text-align:center\">\n                        <div class=\"\">\n                            <div class=\"\">\n                                <img src=\"https://checkin.robinhoodarmy.com/files/73dab63fc606edd.png\" class=\"badgeimg\" alt=\"\" />\n                            </div>\n                        </div>\n                    </div>\n                    \n                    \n                    <div class=\"col-md-10\">\n                        <div class=row>\n                            <div class=\"col-md-12\"> <span class=\"badgename\" style=\"color: #eaeaea;\">Centurion</span></div>\n                            <div class=\"col-md-10 badgeinfo\" style=\"color: #888;\">\n                                {{ 100 - checkin[0].checkins }} more drives to go\n                            </div>\n                        </div>\n                    </div>\n                </div>\n        {% endif %}\n        \n        \n    </div>\n\n\n</div>\n\n<div class=\"row\" >\n    <div class=\"col-md-2\"></div>\n    <div class=\"col-md-10 section-padding-top\">\n        <span class=\"RobinName-HA\">Drives done so far</span>\n        <hr>\n\n        <div class=\"row table-header\">\n            <div class=\"col-md-3\">\n                Total drives\n                <p class=\"drives\">{{checkin[0].checkins}}</p>\n            </div>\n            <div class=\"col-md-3\">\n                Food drives\n                <p class=\"drives\">\n                    {% if food_drives %}\n                        {{ frappe.format(food_drives[0].food_drives) }}\n                    {% else %}\n                        0\n                    {% endif %}\n                </p>\n            </div>\n            <div class=\"col-md-3\">\n                Academy drives\n                <p class=\"drives\">\n                     {% if academy_drives %}\n                        {{frappe.format(academy_drives[0].academy_drives) }}\n                    {% else %}\n                        0\n                    {% endif %}\n                </p>\n            </div>\n           \n        </div>\n        <hr>\n    </div>\n</div>",
  "type": "Section"
 },
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2022-06-26 20:27:20.053293",
  "module": "Robinhood",
  "name": "user gallery",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "{% set images = frappe.db.sql(\"\"\"SELECT u.first_name, c.city, c.selfie_thumbnail, c.creation, date(c.creation) as posting_date from `tabCheckin` c JOIN `tabUser` u on c.owner=u.name  WHERE u.username = %(user)s and c.selfie_thumbnail is not null order by creation desc limit 12;\"\"\", args, as_dict=True) %}\n\n<div class=\"row\">\n    <div class=\"col-md-2\"></div>\n    <div class=\"col-md-10\">\n        <span class=\"RobinName-HA\">Recent checkIns</span>\n        <div style=\"display: flex;flex-direction:row; margin-top: 30px;\">\n        <div class=\"row\" style=\"width: 100%;\">\n            {% for image in images %}\n            {% set image_link =  image.selfie_thumbnail.replace(\"-small\",\"\") %}\n               <div class=\"col-sm-3 col-md-2\" style=\"width: 33%;\">\n                    <a href={{ image_link }} class=\"thumbnail\"><img src={{ image.selfie_thumbnail }} style=\"width:90px;height:90px;object-fit: cover; margin-right:5px\"/>\n                    <p>{{image.city | title }}</p>\n                  <p style=\"color: grey; font-size:12px\">{{image.posting_date}}</p></a>\n                  </div>\n            {% endfor %}\n            \n            \n            </div>\n        </div>\n    </div>\n</div>\n\n\n<div id=\"modal01\" class=\"w3-modal hidden\" onclick=\"this.style.display='none'\">\n  <span class=\"w3-button w3-hover-red w3-xlarge w3-display-topright\">&times;</span>\n  <div class=\"w3-modal-content w3-animate-zoom\">\n    <img id=\"img01\" style=\"width:100%\">\n  </div>\n</div>\n\n<script>\nfunction onClick(src) {\n    //onclick=\"onClick('{{ image_link }}')\"\n  document.getElementById(\"img01\").src = src;\n  document.getElementById(\"modal01\").style.display = \"block\";\n}\n</script>",
  "type": "Section"
 },
 {
  "docstatus": 0,
  "doctype": "Web Template",
  "fields": [],
  "modified": "2022-06-26 20:28:20.507798",
  "module": "Robinhood",
  "name": "robin-checkin-chart",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "standard": 0,
  "template": "{% set checkin_trends = frappe.db.sql(\"\"\" SELECT MONTHNAME(c.creation) as month, count(c.name) as checkin from `tabCheckin` c  inner join `tabUser` as u on c.owner = u.name where u.username = %(user)s GROUP BY YEAR(c.creation), MONTH(c.creation) limit 12;\n\"\"\", args, as_dict=True) %}\n\n{% set lable = [] %}\n{% set values = [] %}\n\n\n\n<div class=\"row\">\n    <div class=\"col-md-2\">\n        {% for checkin_trend in checkin_trends %}\n        <div class=\"hidden\">\n            {{ lable.append(checkin_trend.month)}}\n            {{ values.append(checkin_trend.checkin)}}\n        </div>\n        {% endfor %}\n    </div>\n    <div class=\"col-md-10\">\n\n   <span class=\"RobinName-HA\">CheckIn trend</span>\n    \n    <div id=\"chart\"></div>\n    </div>\n</div>\n<script type=\"text/javascript\">\n   \n    const data = {\n        labels: {{  lable }},\n        datasets: [{\n            name: \"CheckIns\",\n            type: \"bar\",\n            values: {{  values }}\n        }, ]\n    }\n\n    const chart = new Chart.Chart(\"#chart\", { // or a DOM element,\n        // new Chart() in case of ES6 module with above usage\n        title: \"CheckIns in the last 12 months\",\n        data: data,\n        type: 'bar', // or 'bar', 'line', 'scatter', 'pie', 'percentage'\n        height: 250,\n        colors: ['#0B622E', '#0B622E']\n    })\n          \n</script>",
  "type": "Section"
 }
]